!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r,s){for(var a,u,c,l=0,h=[];l<i.length;l++)u=i[l],o[u]&&h.push(o[u][0]),o[u]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);for(n&&n(i,r,s);h.length;)h.shift()();if(s)for(l=0;l<s.length;l++)c=e(e.s=s[l]);return c};var i={},o={1:0};e.e=function(t){function n(){a.onerror=a.onload=null,clearTimeout(u);var e=o[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),o[t]=void 0)}var i=o[t];if(0===i)return new Promise(function(t){t()});if(i)return i[2];var r=new Promise(function(e,n){i=o[t]=[e,n]});i[2]=r;var s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,e.nc&&a.setAttribute("nonce",e.nc),a.src=e.p+"build/"+({0:"sprite"}[t]||t)+".js";var u=setTimeout(n,12e4);return a.onerror=a.onload=n,s.appendChild(a),r},e.m=t,e.c=i,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw console.error(t),t},e(e.s=3)}([function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),u=function(){function t(e){r(this,t),this._images={},this.task=[]}return s(t,[{key:"load",value:function(t,e){for(var n=this,i=0;i<t.length;i++)!function(i){i==t.length-1?n.task.push(function(){n._images[t[i]]=new Image,n._images[t[i]].onload=function(){e()},n._images[t[i]].src=t[i]}):n.task.push(function(e){n._images[t[i]]=new Image,n._images[t[i]].onload=function(){e()},n._images[t[i]].src=t[i]})}(i);return(0,a.queue)(n.task,this)}},{key:"pick",value:function(t){if(void 0!==this._images[t])return this._images[t];throw new Error("请传入图片对象")}}]),t}(),c=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.dpr=window.devicePixelRatio||1,n.assets=t.list||null,n.el=t.el,n.context=t.el.getContext("2d"),n.sprites=[],n.map=t.map||null,n.init(),n}return o(e,t),s(e,[{key:"init",value:function(){this.on(function(t){return console.log("get published content: "+t)},"Event test"),this.on(function(t){return console.log("get content: "+t)}),this._width=this.el.parentNode.clientWidth,this._height=this.el.parentNode.clientHeight,this.width=this.dpr*this._width,this.height=this.dpr*this._height,this.el.style.width=this._width+"px",this.el.style.height=this._height+"px",this.el.width=~~this.width,this.el.height=~~this.height,this.im=new u(this.assets),this.load()}},{key:"dp",value:function(t){return~~t*this.dpr}},{key:"load",value:function(){var t=this;if(this.assets){this.on(function(){t.update()},"load"),this.im.load(this.assets,function(){t.emit(console.log("load success"),"load")});var e=~~this.context.measureText("Loading..").width*this.dpr,n=15*this.dpr,i=~~(this._width-e)/2,o=~~(this._height-n)/2;this.textAlign="center",this.context.font="normal small-caps 400 "+14*this.dpr+"px 'Lato', sans-serif",this.context.fillStyle="#ccc",this.context.fillText("Loading..",i*this.dpr,o*this.dpr)}else this.update()}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.width,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.height;this.context.clearRect(t,e,n,i)}},{key:"update",value:function(t,e,n,i,o,r){this.emit("pub","Event test"),this.draw()}},{key:"draw",value:function(){this.emit("clear"),this.clear();var t=this.im.pick("../assets/ji.jpg");this.context.drawImage(t,0,0,t.width,t.height)}},{key:"addSprite",value:function(t,e){this.sprites[t]=e}},{key:"removeSprite",value:function(t){this.sprites[t]&&delete this.sprites[t]}}]),e}(a.Event);!function(){function t(e,n,i){r(this,t)}s(t,[{key:"update",value:function(){}},{key:"draw",value:function(){}}])}();e.Stage=c},,function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},s=function(t,e){!function n(){t.length>0&&t.shift().apply(e||{},[n].concat(Array.prototype.slice.call(arguments,0)))}()},a=function(){function t(){i(this,t),this.subscribers=new Map([[]])}return o(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",n=this.subscribers;if(!n.get(e))return n.set(e,[t]);n.set(e,n.get(e).push(t))}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",n=this.subscribers.get(e);this.subscribers.delete(e);var i=!0,o=!1,r=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){s.value.apply(this,arguments)}}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}}}]),t}();!function(){function t(){i(this,t),this.list={}}o(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";this.list[e]||(this.list[e]=[]),this.list[e].push(t)}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",n=this.list[e];if(n&&0!==n.length){for(var i=0;i<n.length;i++)n[i].apply(this,arguments);delete this.list[e]}}}])}();e.queue=s,e.Event=a,e.raf=r},function(t,e,n){t.exports=n(0)}]);