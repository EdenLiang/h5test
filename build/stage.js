!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,o,a){for(var u,c,s,l=0,h=[];l<r.length;l++)c=r[l],i[c]&&h.push(i[c][0]),i[c]=0;for(u in o)Object.prototype.hasOwnProperty.call(o,u)&&(t[u]=o[u]);for(n&&n(r,o,a);h.length;)h.shift()();if(a)for(l=0;l<a.length;l++)s=e(e.s=a[l]);return s};var r={},i={1:0};e.e=function(t){function n(){u.onerror=u.onload=null,clearTimeout(c);var e=i[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),i[t]=void 0)}var r=i[t];if(0===r)return new Promise(function(t){t()});if(r)return r[2];var o=new Promise(function(e,n){r=i[t]=[e,n]});r[2]=o;var a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.type="text/javascript",u.charset="utf-8",u.async=!0,u.timeout=12e4,e.nc&&u.setAttribute("nonce",e.nc),u.src=e.p+"build/"+({0:"sprite"}[t]||t)+".js";var c=setTimeout(n,12e4);return u.onerror=u.onload=n,a.appendChild(u),o},e.m=t,e.c=r,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw console.error(t),t},e(e.s=7)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(3),s=n(4),l=r(s),h=n(6),f=(r(h),function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.dpr=window.devicePixelRatio||1,n.container=t||null,n.gl=null,n.then=0,!n.container||"CANVAS"!==n.container.nodeName){var r=document.createElement("canvas");r.id="gl",r.oncontextmenu=function(){return!1},n.container||document.body.appendChild(r),"CANVAS"!==n.container.nodeName&&n.container.appendChild(r),n.container=document.querySelector("#gl")}return n.init(),n}return a(e,t),u(e,[{key:"init",value:function(){this.on(function(t){return console.log("get published content: "+t)},"Event test"),this.on(function(t){return console.log("get content: "+t)},"sss"),this._width=this.container.parentNode.clientWidth,this._height=this.container.parentNode.clientHeight,this.width=this.dpr*this._width,this.height=this.dpr*this._height,this.container.style.width=this._width+"px",this.container.style.height=this._height+"px",this.container.width=~~this.width,this.container.height=~~this.height,this.gl=(0,l.default)(this.container),this.initEvent()}},{key:"dp",value:function(t){return~~t*this.dpr}},{key:"load",value:function(){var t=this;this.assets?(this.on(function(){t.initEvent()},"load"),this.im.load(this.assets,function(){t.emit(console.log("load success"),"load")})):this.initEvent()}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.width,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.height;this.context.clearRect(t,e,n,r)}},{key:"initEvent",value:function(){var t=this;["mousedown","mouseup","mousemove","touchstart","touchend","touchmove","click"].forEach(function(e){t.container.addEventListener(e,function(n){var r=n.target.getBoundingClientRect(),i=r.left,o=r.top,a=void 0,u=void 0,c={originalEvent:n,type:e};if(n.changedTouches){var s=n.changedTouches[0],l=s.clientX,h=s.clientY;a=Math.round(l-i),u=Math.round(h-o)}else a=Math.round(n.clientX-i),u=Math.round(n.clientY-o);Object.assign(c,{originalX:a,originalY:u}),t.emit("native",e,c)},!0)})}},{key:"update",value:function(t,e,n,r,i,o){this.emit("pub","Event test"),this.draw()}},{key:"draw",value:function(){var t=this;this.emit("clear"),this.clear();var e=this.im.pick("../assets/ji.jpg"),n=this.im.pick("../assets/hero.jpg"),r=this.im.pick("../assets/grain.png");this.context.drawImage(e,0,0,e.width,e.height),setTimeout(function(){t.context.drawImage(n,0,0,n.width,e.height)},100),setTimeout(function(){t.context.drawImage(r,0,0,r.width,e.height)},500)}},{key:"render",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=.001*t;Math.min(.1,e-then);then=e,(0,c.raf)(render)})}]),e}(c.Event)),d={create:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(f,[null].concat(e)))}};e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={identity:[1,0,0,0,1,0,0,0,1],multiply:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],s=t[7],l=t[8],h=e[0],f=e[1],d=e[2],v=e[3],g=e[4],y=e[5],m=e[6],p=e[7],w=e[8];e[0]=h*n+v*r+m*i,e[1]=f*n+g*r+p*i,e[2]=d*n+y*r+w*i,e[3]=h*o+v*a+m*u,e[4]=f*o+g*a+p*u,e[5]=d*o+y*a+w*u,e[6]=h*c+v*s+m*l,e[7]=f*c+g*s+p*l,e[8]=d*c+y*s+w*l},vec2_multiply:function(t,e){var n=[];return n[0]=e[0]*t[0]+e[3]*t[1]+e[6],n[1]=e[1]*t[0]+e[4]*t[1]+e[7],n},transpose:function(t){return[t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]]}},i={length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},normalize:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return 0===e?[0,0,0]:[t[0]/e,t[1]/e,t[2]/e]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},angle:function(t,e){return Math.acos((t[0]*e[0]+t[1]*e[1]+t[2]*e[2])/(Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])*Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])))},cross:function(t,e){return[t[1]*e[2]-e[1]*t[2],t[2]*e[0]-e[2]*t[0],t[0]*e[1]-e[0]*t[1]]},multiply:function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},add:function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]},subtract:function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},equal:function(t,e){return void 0===t&&void 0===e||void 0!==t&&void 0!==e&&(Math.abs(t[0]-e[0])<1e-7&&Math.abs(t[1]-e[1])<1e-7&&Math.abs(t[2]-e[2])<1e-7)}},o={multiply:function(t,e,n){n=n||new Float32Array(16);var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=e[5],s=e[6],l=e[7],h=e[8],f=e[9],d=e[10],v=e[11],g=e[12],y=e[13],m=e[14],p=e[15],w=t[0],x=t[1],A=t[2],b=t[3],_=t[4],E=t[5],M=t[6],R=t[7],T=t[8],F=t[9],k=t[10],S=t[11],P=t[12],L=t[13],C=t[14],O=t[15];return n[0]=r*w+i*_+o*T+a*P,n[1]=r*x+i*E+o*F+a*L,n[2]=r*A+i*M+o*k+a*C,n[3]=r*b+i*R+o*S+a*O,n[4]=u*w+c*_+s*T+l*P,n[5]=u*x+c*E+s*F+l*L,n[6]=u*A+c*M+s*k+l*C,n[7]=u*b+c*R+s*S+l*O,n[8]=h*w+f*_+d*T+v*P,n[9]=h*x+f*E+d*F+v*L,n[10]=h*A+f*M+d*k+v*C,n[11]=h*b+f*R+d*S+v*O,n[12]=g*w+y*_+m*T+p*P,n[13]=g*x+y*E+m*F+p*L,n[14]=g*A+y*M+m*k+p*C,n[15]=g*b+y*R+m*S+p*O,n},addVectors:function(t,e,n){return n=n||new Float32Array(3),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n},subtractVectors:function(t,e,n){return n=n||new Float32Array(3),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n},normalize:function(t,e){e=e||new Float32Array(3);var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return n>1e-5&&(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n),e},cross:function(t,e,n){return n=n||new Float32Array(3),n[0]=t[1]*e[2]-t[2]*e[1],n[1]=t[2]*e[0]-t[0]*e[2],n[2]=t[0]*e[1]-t[1]*e[0],n},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},distanceSq:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},distance:function(t,e){return Math.sqrt(distanceSq(t,e))},identity:function(t){return t=t||new Float32Array(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,e){return e=e||new Float32Array(16),e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},lookAt:function(t,e,n,r){r=r||new Float32Array(16);var i=normalize(subtractVectors(t,e)),o=normalize(cross(n,i)),a=normalize(cross(i,o));return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=0,r[4]=a[0],r[5]=a[1],r[6]=a[2],r[7]=0,r[8]=i[0],r[9]=i[1],r[10]=i[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},perspective:function(t,e,n,r,i){i=i||new Float32Array(16);var o=Math.tan(.5*Math.PI-.5*t),a=1/(n-r);return i[0]=o/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+r)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=n*r*a*2,i[15]=0,i},orthographic:function(t,e,n,r,i,o,a){return a=a||new Float32Array(16),a[0]=2/(e-t),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(r-n),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(i-o),a[11]=0,a[12]=(t+e)/(t-e),a[13]=(n+r)/(n-r),a[14]=(i+o)/(i-o),a[15]=1,a},frustum:function(t,e,n,r,i,o){var a=e-t,u=r-n,c=o-i;return dst[0]=2*i/a,dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=2*i/u,dst[6]=0,dst[7]=0,dst[8]=(t+e)/a,dst[9]=(r+n)/u,dst[10]=-(o+i)/c,dst[11]=-1,dst[12]=0,dst[13]=0,dst[14]=-2*i*o/c,dst[15]=0,dst},translation:function(t,e,n,r){return r=r||new Float32Array(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=t,r[13]=e,r[14]=n,r[15]=1,r},translate:function(t,e,n,r,i){i=i||new Float32Array(16);var o=t[0],a=t[1],u=t[2],c=t[3],s=t[4],l=t[5],h=t[6],f=t[7],d=t[8],v=t[9],g=t[10],y=t[11],m=t[12],p=t[13],w=t[14],x=t[15];return t!==i&&(i[0]=o,i[1]=a,i[2]=u,i[3]=c,i[4]=s,i[5]=l,i[6]=h,i[7]=f,i[8]=d,i[9]=v,i[10]=g,i[11]=y),i[12]=o*e+s*n+d*r+m,i[13]=a*e+l*n+v*r+p,i[14]=u*e+h*n+g*r+w,i[15]=c*e+f*n+y*r+x,i},xRotation:function(t,e){e=e||new Float32Array(16);var n=Math.cos(t),r=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},xRotate:function(t,e,n){n=n||new Float32Array(16);var r=t[4],i=t[5],o=t[6],a=t[7],u=t[8],c=t[9],s=t[10],l=t[11],h=Math.cos(e),f=Math.sin(e);return n[4]=h*r+f*u,n[5]=h*i+f*c,n[6]=h*o+f*s,n[7]=h*a+f*l,n[8]=h*u-f*r,n[9]=h*c-f*i,n[10]=h*s-f*o,n[11]=h*l-f*a,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},yRotation:function(t,e){e=e||new Float32Array(16);var n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},yRotate:function(t,e,n){n=n||new Float32Array(16);var r=t[0],i=t[1],o=t[2],a=t[3],u=t[8],c=t[9],s=t[10],l=t[11],h=Math.cos(e),f=Math.sin(e);return n[0]=h*r-f*u,n[1]=h*i-f*c,n[2]=h*o-f*s,n[3]=h*a-f*l,n[8]=h*u+f*r,n[9]=h*c+f*i,n[10]=h*s+f*o,n[11]=h*l+f*a,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},zRotation:function(t,e){e=e||new Float32Array(16);var n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},zRotate:function(t,e,n){n=n||new Float32Array(16);var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],s=t[6],l=t[7],h=Math.cos(e),f=Math.sin(e);return n[0]=h*r+f*u,n[1]=h*i+f*c,n[2]=h*o+f*s,n[3]=h*a+f*l,n[4]=h*u-f*r,n[5]=h*c-f*i,n[6]=h*s-f*o,n[7]=h*l-f*a,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},axisRotation:function(t,e,n){n=n||new Float32Array(16);var r=t[0],i=t[1],o=t[2],a=Math.sqrt(r*r+i*i+o*o);r/=a,i/=a,o/=a;var u=r*r,c=i*i,s=o*o,l=Math.cos(e),h=Math.sin(e),f=1-l;return n[0]=u+(1-u)*l,n[1]=r*i*f+o*h,n[2]=r*o*f-i*h,n[3]=0,n[4]=r*i*f-o*h,n[5]=c+(1-c)*l,n[6]=i*o*f+r*h,n[7]=0,n[8]=r*o*f+i*h,n[9]=i*o*f-r*h,n[10]=s+(1-s)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},axisRotate:function(t,e,n,r){r=r||new Float32Array(16);var i=e[0],o=e[1],a=e[2],u=Math.sqrt(i*i+o*o+a*a);i/=u,o/=u,a/=u;var c=i*i,s=o*o,l=a*a,h=Math.cos(n),f=Math.sin(n),d=1-h,v=c+(1-c)*h,g=i*o*d+a*f,y=i*a*d-o*f,m=i*o*d-a*f,p=s+(1-s)*h,w=o*a*d+i*f,x=i*a*d+o*f,A=o*a*d-i*f,b=l+(1-l)*h,_=t[0],E=t[1],M=t[2],R=t[3],T=t[4],F=t[5],k=t[6],S=t[7],P=t[8],L=t[9],C=t[10],O=t[11];return r[0]=v*_+g*T+y*P,r[1]=v*E+g*F+y*L,r[2]=v*M+g*k+y*C,r[3]=v*R+g*S+y*O,r[4]=m*_+p*T+w*P,r[5]=m*E+p*F+w*L,r[6]=m*M+p*k+w*C,r[7]=m*R+p*S+w*O,r[8]=x*_+A*T+b*P,r[9]=x*E+A*F+b*L,r[10]=x*M+A*k+b*C,r[11]=x*R+A*S+b*O,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},scaling:function(t,e,n,r){return r=r||new Float32Array(16),r[0]=t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},scale:function(t,e,n,r,i){return i=i||new Float32Array(16),i[0]=e*t[0],i[1]=e*t[1],i[2]=e*t[2],i[3]=e*t[3],i[4]=n*t[4],i[5]=n*t[5],i[6]=n*t[6],i[7]=n*t[7],i[8]=r*t[8],i[9]=r*t[9],i[10]=r*t[10],i[11]=r*t[11],t!==i&&(i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i},inverse:function(t,e){e=e||new Float32Array(16);var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],s=t[7],l=t[8],h=t[9],f=t[10],d=t[11],v=t[12],g=t[13],y=t[14],m=t[15],p=f*m,w=y*d,x=c*m,A=y*s,b=c*d,_=f*s,E=i*m,M=y*o,R=i*d,T=f*o,F=i*s,k=c*o,S=l*g,P=v*h,L=a*g,C=v*u,O=a*h,U=l*u,B=n*g,j=v*r,D=n*h,I=l*r,q=n*u,N=a*r,X=p*u+A*h+b*g-(w*u+x*h+_*g),V=w*r+E*h+T*g-(p*r+M*h+R*g),Y=x*r+M*u+F*g-(A*r+E*u+k*g),z=_*r+R*u+k*h-(b*r+T*u+F*h),G=1/(n*X+a*V+l*Y+v*z);return e[0]=G*X,e[1]=G*V,e[2]=G*Y,e[3]=G*z,e[4]=G*(w*a+x*l+_*v-(p*a+A*l+b*v)),e[5]=G*(p*n+M*l+R*v-(w*n+E*l+T*v)),e[6]=G*(A*n+E*a+k*v-(x*n+M*a+F*v)),e[7]=G*(b*n+T*a+F*l-(_*n+R*a+k*l)),e[8]=G*(S*s+C*d+O*m-(P*s+L*d+U*m)),e[9]=G*(P*o+B*d+I*m-(S*o+j*d+D*m)),e[10]=G*(L*o+j*s+q*m-(C*o+B*s+N*m)),e[11]=G*(U*o+D*s+N*d-(O*o+I*s+q*d)),e[12]=G*(L*f+U*y+P*c-(O*y+S*c+C*f)),e[13]=G*(D*y+S*i+j*f-(B*f+I*y+P*i)),e[14]=G*(B*c+N*y+C*i-(q*y+L*i+j*c)),e[15]=G*(q*f+O*i+I*c-(D*c+N*f+U*i)),e},transformVector:function(t,e,n){n=n||new Float32Array(4);for(var r=0;r<4;++r){n[r]=0;for(var i=0;i<4;++i)n[r]+=e[i]*t[4*i+r]}return n},transformPoint:function(t,e,n){n=n||new Float32Array(3);var r=e[0],i=e[1],o=e[2],a=r*t[3]+i*t[7]+o*t[11]+t[15];return n[0]=(r*t[0]+i*t[4]+o*t[8]+t[12])/a,n[1]=(r*t[1]+i*t[5]+o*t[9]+t[13])/a,n[2]=(r*t[2]+i*t[6]+o*t[10]+t[14])/a,n},transformDirection:function(t,e,n){n=n||new Float32Array(3);var r=e[0],i=e[1],o=e[2];return n[0]=r*t[0]+i*t[4]+o*t[8],n[1]=r*t[1]+i*t[5]+o*t[9],n[2]=r*t[2]+i*t[6]+o*t[10],n},transformNormal:function(t,e,n){n=n||new Float32Array(3);var r=inverse(t),i=e[0],o=e[1],a=e[2];return n[0]=i*r[0]+o*r[1]+a*r[2],n[1]=i*r[4]+o*r[5]+a*r[6],n[2]=i*r[8]+o*r[9]+a*r[10],n},copy:function(t,e){return e=e||new Float32Array(16),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}};e.mat3=r,e.vec3=i,e.m4=o},,function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},a=function(t,e){!function n(){t.length>0&&t.shift().apply(e||{},[n].concat(Array.prototype.slice.call(arguments,0)))}()},u=function(){function t(){r(this,t),this.subscribers=new Map([[]])}return i(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",n=this.subscribers;if(!n.get(e))return n.set(e,[t]);n.set(e,n.get(e).push(t))}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",n=this.subscribers.get(e);if(n){var r=!0,i=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){a.value.apply(this,arguments)}}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}}}}]),t}();!function(){function t(){r(this,t),this.list={}}i(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";this.list[e]||(this.list[e]=[]),this.list[e].push(t)}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",n=this.list[e];if(n&&0!==n.length){for(var r=0;r<n.length;r++)n[r].apply(this,arguments);delete this.list[e]}}}])}();e.queue=a,e.Event=u,e.raf=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(5),a=function(t){return t&&t.__esModule?t:{default:t}}(o),u=n(1),c=function(){function t(e){r(this,t),this.canvas=e,this.gl=void 0,this.transform=new a.default,this.init()}return i(t,[{key:"init",value:function(){this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");var t=this.gl;if(!t)throw new Error("connot get gl context!");var e=this.createProgram(t);this.positionLocation=t.getAttribLocation(e,"a_position"),this.texcoordLocation=t.getAttribLocation(e,"a_texcoord"),this.matrixLocation=t.getUniformLocation(e,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(e,"u_textureMatrix");var n=(t.getUniformLocation(e,"u_texture"),t.createBuffer());t.bindBuffer(t.ARRAY_BUFFER,n),this.positionBuffer=n;var r=[0,0,0,1,1,0,1,0,0,1,1,1];t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW);var i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),this.texcoordBuffer=i;var o=[0,0,0,1,1,0,1,0,0,1,1,1];t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW)}},{key:"getFragmentShaderSource",value:function(){return"precision mediump float;\n        \n        varying vec2 v_texcoord;\n        \n        uniform sampler2D u_texture;\n        \n        void main() {\n           gl_FragColor = texture2D(u_texture, v_texcoord);\n        }"}},{key:"getVertexShaderSource",value:function(){return"attribute vec4 a_position;\n        attribute vec2 a_texcoord;\n        \n        uniform mat4 u_matrix;\n        uniform mat4 u_textureMatrix;\n        \n        varying vec2 v_texcoord;\n        \n        void main() {\n           gl_Position = u_matrix * a_position;\n           v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\n        }"}},{key:"getFragmentShader",value:function(t){return this.getShader(t,t.FRAGMENT_SHADER,this.getFragmentShaderSource())}},{key:"getVertexShader",value:function(t){return this.getShader(t,t.VERTEX_SHADER,this.getVertexShaderSource())}},{key:"getShader",value:function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)}},{key:"createProgram",value:function(t){var e=this.getFragmentShader(t),n=this.getVertexShader(t),r=t.createProgram();return t.attachShader(r,n),t.attachShader(r,e),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||console.log("Could not initialise shaders:"+t.getProgramInfoLog(r)),t.useProgram(r),r}},{key:"loadTexture",value:function(t){var e=this.gl,n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);var r={width:1,height:1,texture:n},i=new Image;return i.addEventListener("load",function(){r.width=i.width,r.height=i.height,e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i)}),i.src=t,r}},{key:"drawImage",value:function(t,e,n,r,i,o,a,c,s,l,h,f){var d=this.gl;void 0===c&&(c=r,r=0),void 0===s&&(s=i,i=0),void 0===o&&(o=e),void 0===a&&(a=n),void 0===l&&(l=o,o=e),void 0===h&&(h=a,a=n),void 0===f&&(f=0),d.bindTexture(d.TEXTURE_2D,t),d.bindBuffer(d.ARRAY_BUFFER,this.positionBuffer),d.enableVertexAttribArray(this.positionLocation),d.vertexAttribPointer(this.positionLocation,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,this.texcoordBuffer),d.enableVertexAttribArray(this.texcoordLocation),d.vertexAttribPointer(this.texcoordLocation,2,d.FLOAT,!1,0,0);var v=u.m4.orthographic(0,d.canvas.width,d.canvas.height,0,-1,1);v=u.m4.translate(v,c,s,0),v=u.m4.scale(v,l,h,1),d.uniformMatrix4fv(this.matrixLocation,!1,v);var g=u.m4.scaling(1/e,1/n,1);g=u.m4.translate(g,.5*e,.5*n,0),g=u.m4.zRotate(g,f),g=u.m4.translate(g,-.5*e,-.5*n,0),g=u.m4.translate(g,r,i,0),g=u.m4.scale(g,o,a,1),d.uniformMatrix4fv(this.textureMatrixLocation,!1,g),d.uniform1i(this.textureLocation,0),d.drawArrays(d.TRIANGLES,0,6)}}]),t}(),s=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(c,[null].concat(e)))};e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=function(){function t(){r(this,t),this.stack=[],this.restore()}return i(t,[{key:"restore",value:function(){this.stack.pop(),this.stack.length<1&&(this.stack[0]=o.m4.identity())}},{key:"save",value:function(){this.stack.push(this.getCurrentMatrix())}},{key:"getCurrentMatrix",value:function(){return this.stack[this.stack.length-1].slice()}},{key:"setCurrentMatrix",value:function(){return this.stack[this.stack.length-1]=m}},{key:"translate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getCurrentMatrix();this.setCurrentMatrix(o.m4.translate(r,t,e,n))}},{key:"rotateZ",value:function(t){var e=this.getCurrentMatrix();this.setCurrentMatrix(o.m4.zRotate(e,t))}},{key:"scale",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.getCurrentMatrix();this.setCurrentMatrix(o.m4.scale(r,t,e,n))}}]),t}();e.default=a},function(t,e,n){"use strict"},function(t,e,n){t.exports=n(0)}]);