{"version":3,"sources":["webpack:///webpack/bootstrap 54965114e623ee760e3e","webpack:///./src/_.js","webpack:///./src/stats.min.js","webpack:///./src/street.js"],"names":["raf","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","retinaFy","canvas","height","document","body","clientHeight","width","clientWidth","devicePixelRatio","style","log","console","apply","arguments","queue","funcs","scope","next","length","shift","concat","Array","prototype","slice","call","adler32","str","MOD","a","b","i","data","charCodeAt","king","arr","fn","ret","args","Object","toString","Stats","f","e","createElement","id","cssText","l","c","d","innerHTML","toUpperCase","appendChild","m","children","display","n","p","firstChild","Math","min","q","self","performance","now","bind","Date","k","r","t","addEventListener","preventDefault","u","Infinity","v","A","B","g","w","x","C","D","memory","h","y","z","E","F","REVISION","domElement","setMode","begin","end","max","textContent","round","usedJSHeapSize","jsHeapSizeLimit","update","module","exports","Loader","constructor","_images","task","load","push","Image","onload","src","cb","pick","Stage","options","stg","context","getContext","im","store","init","_width","parentNode","_height","dpr","dp","px","flag","loadTxt","textWidth","measureText","textHeight","rx","ry","loadPx","textAlign","font","fillStyle","fillText","clear","drawImage","clearRect","type","obj","draw","Buffer","ctx","stats","position","right","top","querySelector","s","hot","accept"],"mappings":"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","file":"build/street.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 54965114e623ee760e3e","/*\n*   create by vincent 31 dec 2016\n*   underscore shell\n*   @ queue \n*   @ before/after\t\n*   @   \n*   @ raf\n*   @ retinaFy\n*   @ log\n*\n*/\n\nconst raf = window.requestAnimationFrame\n|| window.webkitRequestAnimationFrame\n|| window.mozRequestAnimationFrame\n|| window.oRequestAnimationFrame\n|| window.msRequestAnimationFrame\n|| function(callback) {\n  window.setTimeout(callback, 1000 / 60); //每帧1000/60ms\n};\n\nconst retinaFy = function (canvas) {\n    const height = document.body.clientHeight;\n    const width = document.body.clientWidth;\n  \n    canvas.width = width * window.devicePixelRatio;\n    canvas.height = height * window.devicePixelRatio;\n  \n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n}\n\nconst log = function (){\n    //console.clear();\n    console.log.apply(console, arguments);\n}\n\nconst queue = function(funcs, scope){\n    (function next() {  \n        if(funcs.length > 0) {  \n            funcs.shift().apply(scope || {}, [next].concat(Array.prototype.slice.call(arguments, 0)));  \n        }  \n  })();\n}\n\nconst adler32 = function(str){\n    var MOD = 65521;\n    var a = 1;\n    var b = 0;\n    for (var i = 0; i < data.length >>> 0 ; i++) {\n        a = (a + data.charCodeAt(i)) % MOD;\n        b = (b + a) % MOD;\n    }\n    return a | (b << 16);\n}\n\n//高频方法，为异步任务fn装配queue task返回数组\n//判断第一个入参是否为数组，循环数组 || currying向右归并\nfunction king(arr,fn){\n    var ret = [];\n    var args = [].slice.call(arguments, 1);\n    \n    if(Object.prototype.toString.call(args)=='[object Array]'){\n//todo\n    }else{\n\n    }\n\n}\n\n\n\nexport { queue }\n\n\n// WEBPACK FOOTER //\n// ./src/_.js","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function f(a,e,b){a=document.createElement(a);a.id=e;a.style.cssText=b;return a}function l(a,e,b){var c=f(\"div\",a,\"padding:0 0 3px 3px;text-align:left;background:\"+b),d=f(\"div\",a+\"Text\",\"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\"+e);d.innerHTML=a.toUpperCase();c.appendChild(d);a=f(\"div\",a+\"Graph\",\"width:74px;height:30px;background:\"+e);c.appendChild(a);for(e=0;74>e;e++)a.appendChild(f(\"span\",\"\",\"width:1px;height:30px;float:left;opacity:0.9;background:\"+\nb));return c}function m(a){for(var b=c.children,d=0;d<b.length;d++)b[d].style.display=d===a?\"block\":\"none\";n=a}function p(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+\"px\"}var q=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,k=q(),r=k,t=0,n=0,c=f(\"div\",\"stats\",\"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\",function(a){a.preventDefault();m(++n%c.children.length)},!1);var d=0,u=Infinity,v=0,b=l(\"fps\",\"#0ff\",\"#002\"),\nA=b.children[0],B=b.children[1];c.appendChild(b);var g=0,w=Infinity,x=0,b=l(\"ms\",\"#0f0\",\"#020\"),C=b.children[0],D=b.children[1];c.appendChild(b);if(self.performance&&self.performance.memory){var h=0,y=Infinity,z=0,b=l(\"mb\",\"#f08\",\"#201\"),E=b.children[0],F=b.children[1];c.appendChild(b)}m(n);return{REVISION:14,domElement:c,setMode:m,begin:function(){k=q()},end:function(){var a=q();g=a-k;w=Math.min(w,g);x=Math.max(x,g);C.textContent=(g|0)+\" MS (\"+(w|0)+\"-\"+(x|0)+\")\";p(D,g/200);t++;if(a>r+1E3&&(d=Math.round(1E3*\nt/(a-r)),u=Math.min(u,d),v=Math.max(v,d),A.textContent=d+\" FPS (\"+u+\"-\"+v+\")\",p(B,d/100),r=a,t=0,void 0!==h)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;h=Math.round(9.54E-7*b);y=Math.min(y,h);z=Math.max(z,h);E.textContent=h+\" MB (\"+y+\"-\"+z+\")\";p(F,b/c)}return a},update:function(){k=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n\n// WEBPACK FOOTER //\n// ./src/stats.min.js","import Stats from 'stats.min'\nimport { queue } from '_'\n\n\n//资源加载\nclass Loader {\n    constructor() {\n        this._images = {};\n        this.task = [];\n    }\n    //加载器\n    load(arr,callback) {\n        let self = this;\n        for(let i = 0;i<arr.length;i++) {\n            if( i == arr.length - 1 ){\n                self.task.push(function(){\n                    self._images[arr[i]] = new Image();\n                    self._images[arr[i]].onload = function(){\n                        callback();\n                        return\n                    }\n                    self._images[arr[i]].src = arr[i];\n                })\n            } else {\n                self.task.push(function(cb){\n                    self._images[arr[i]] = new Image();\n                    self._images[arr[i]].onload = function(){\n                        cb();\n                    }\n                    self._images[arr[i]].src = arr[i];\n                })\n            }\n        }\n        \n        return queue(self.task,this)\n    }\n    //拦截器 获取已存在图片<str>src  todo:不存在则立即加载 拦截当前加载队列\n    pick(src,callback) {\n        let self = this;\n        if ( typeof this._images[src] != 'undefined' ){\n            return  this._images[src];\n        } else {\n            let ret = [];\n            ret.push(src);\n            self.load(ret,callback)\n        }\n    }\n}\n\n//舞台\nclass Stage {\n    constructor(options) {\n        this.stg = options.stg;\n        this.context = options.stg.getContext('2d');\n        this.im = new Loader();\n        this.store = null;\n        this.init();\n    }\n    init() {\n        this._width = this.stg.parentNode.clientWidth;\n        this._height = this.stg.parentNode.clientHeight;\n        this.dpr = window.devicePixelRatio || 1;\n        this.width = this.dpr * this._width;\n        this.height = this.dpr * this._height;\n\n        this.stg.style.width = `${this._width}px`;\n        this.stg.style.height = `${this._height}px`;\n        this.stg.width = ~~ this.width;\n        this.stg.height = ~~ this.height;\n            \n        this.load(false);\n    }\n    dp(px) {\n        return ~~ px * this.dpr\n    }\n    load (flag) {\n        if (!flag) {\n            let loadTxt = 'Loading..';\n            \n            let textWidth = ~~ this.context.measureText(loadTxt).width * this.dpr;\n            let textHeight =  15*this.dpr;\n            \n            let rx = ~~ ( this._width - textWidth ) / 2;\n            let ry = ~~ ( this._height - textHeight ) / 2;\n            \n            let loadPx = 15;\n            this.textAlign=\"center\";\n            this.context.font = `400 ${loadPx*this.dpr}px 微软雅黑,Sans-Serif`;\n    \n            this.context.fillStyle = '#ccc';\n            \n            this.context.fillText(loadTxt,rx*this.dpr,ry*this.dpr); \n\n\n        } else {\n            this.clear();\n            //todo MAP\n            let t = this.im.pick('../image/this.jpg')\n            this.context.drawImage(t,0,0,t.width,t.height)\n            \n        }\n        return false\n    }\n    clear(x = 0, y = 0,width = this.width , height = this.height) {\n        this.context.clearRect(x, y, width, height);\n    }\n    update(type,obj,x,y,rx,ry) {\n       //drawImage\n       //this.context[type].call(this.context,[].slice.call(arguments,1));\n       //this.context[type]('111',10,20);\n       this.store = [].slice.call(arguments,2);\n       console.log(this.store,arguments,[].slice.call(arguments,1));\n    }\n    draw() {\n        //update type:text,filltext;image,drawImage 封装常用方法 保村坐标到this.store\n    }\n}\n\n//缓存ctx\nclass Buffer {\n    constructor() {\n        this.ctx = null;\n    }\n}\n\nconst stats = new Stats();\nstats.setMode(0);\nstats.domElement.style.position = 'absolute';\nstats.domElement.style.right = '0px';\nstats.domElement.style.top = '0px';\ndocument.body.appendChild( stats.domElement );\n//stats.update()\n\nconst canvas = document.querySelector('#stage');\n\nvar s = new Stage({stg:canvas});\ns.im.load([\n    '../image/this.jpg'\n],function(){\n    s.load(true);\n})\nwindow.addEventListener('resize', () => {\n    s.init();\n    s.load(true);\n});\n      \n\nif (module.hot) {\n    module.hot.accept();\n}\n\n\n// WEBPACK FOOTER //\n// ./src/street.js"],"sourceRoot":""}