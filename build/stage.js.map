{"version":3,"sources":["webpack:///webpack/bootstrap c47a32ab6f4f2139b9a5","webpack:///./src/stage/stage.js","webpack:///./src/stage/math.js","webpack:///./src/_.js","webpack:///./src/stage/glsl.js","webpack:///./src/stage/transform.js"],"names":["_Stage","canvas","dpr","window","devicePixelRatio","container","gl","im","then","nodeName","document","createElement","id","oncontextmenu","body","appendChild","querySelector","init","on","content","console","log","_width","parentNode","clientWidth","_height","clientHeight","width","height","style","initEvent","px","events","forEach","event","addEventListener","e","target","getBoundingClientRect","left","top","originalX","originalY","evtArgs","originalEvent","type","changedTouches","clientX","clientY","Math","round","Object","assign","emit","viewport","clear","COLOR_BUFFER_BIT","time","loop","now","deltaTime","min","update","draw","Stage","create","args","mat3","identity","multiply","m1","m2","m10","m11","m12","m13","m14","m15","m16","m17","m18","m20","m21","m22","m23","m24","m25","m26","m27","m28","vec2_multiply","mOut","transpose","m","vec3","length","pt","sqrt","normalize","d","dot","v1","v2","angle","acos","cross","vectA","vectB","constB","add","subtract","equal","a","b","epsilon","undefined","abs","m4","dst","Float32Array","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","addVectors","subtractVectors","v","distanceSq","dx","dy","dz","distance","lookAt","cameraPosition","up","zAxis","xAxis","yAxis","perspective","fieldOfViewInRadians","aspect","near","far","f","tan","PI","rangeInv","orthographic","right","bottom","frustum","translation","tx","ty","tz","translate","m00","m01","m02","m03","m30","m31","m32","m33","xRotation","angleInRadians","c","cos","s","sin","xRotate","yRotation","yRotate","zRotation","zRotate","axisRotation","axis","x","y","z","n","xx","yy","zz","oneMinusCosine","axisRotate","r00","r01","r02","r10","r11","r12","r20","r21","r22","scaling","sx","sy","sz","scale","inverse","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","transformVector","i","j","transformPoint","v0","transformDirection","transformNormal","mi","copy","src","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","apply","arguments","queue","funcs","scope","next","shift","concat","Array","prototype","slice","call","adler32","str","MOD","data","charCodeAt","observer","key","fn","__","defineProperty","get","set","value","Event","subscribers","Map","subs","push","handlers","EventEmitter","list","cb","Gl","transform","_resources","getContext","Error","program","createProgram","positionLocation","getAttribLocation","texcoordLocation","matrixLocation","getUniformLocation","textureMatrixLocation","textureLocation","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","positions","bufferData","STATIC_DRAW","texcoordBuffer","texcoords","source","getShader","FRAGMENT_SHADER","getFragmentShaderSource","VERTEX_SHADER","getVertexShaderSource","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","getFragmentShader","vertexShader","getVertexShader","shaderProgram","attachShader","linkProgram","lineStatus","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","url","timeout","loadedTex","mapKey","has","Promise","resolve","reject","tex","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","Uint8Array","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","textureInfo","texture","timer","img","Image","clearTimeout","resources","loadTexture","isArray","ret","res","texWidth","texHeight","srcX","srcY","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","srcRotation","enableVertexAttribArray","vertexAttribPointer","FLOAT","matrix","uniformMatrix4fv","texMatrix","uniform1i","drawArrays","TRIANGLES","gl2d","Transform","stack","restore","pop","getCurrentMatrix","setCurrentMatrix"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAY,2BAA2B;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kDAA0C,WAAW,EAAE;AACvD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6DAAqD,aAAa;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA,kDAA0C,oBAAoB,WAAW;;AAEzE;AACA;;;;;;;;;;;;;;;;ACpJA;;AACA;;;;;;;;;;;;AAEA;IACMA,M;;;AACF,oBAAYC,MAAZ,EAAoB;AAAA;;AAAA;;AAEhB,cAAKC,GAAL,GAAWC,OAAOC,gBAAP,IAA2B,CAAtC;;AAEA,cAAKC,SAAL,GAAiBJ,UAAU,IAA3B;AACA;AACA,cAAKK,EAAL,GAAU,IAAV;AACA;AACA,cAAKC,EAAL,GAAU,IAAV;;AAEA;AACA,cAAKC,IAAL,GAAY,CAAZ;;AAGA;AACA,YAAK,CAAC,MAAKH,SAAN,IAAmB,MAAKA,SAAL,CAAeI,QAAf,KAA4B,QAApD,EAA8D;AAC1D,gBAAIR,UAASS,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAV,oBAAOW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","file":"build/stage.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n \t\tif(executeModules) {\n \t\t\tfor(i=0; i < executeModules.length; i++) {\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData === 0) {\n \t\t\treturn new Promise(function(resolve) { resolve(); });\n \t\t}\n\n \t\t// a Promise means \"currently loading\".\n \t\tif(installedChunkData) {\n \t\t\treturn installedChunkData[2];\n \t\t}\n\n \t\t// setup Promise in chunk cache\n \t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t});\n \t\tinstalledChunkData[2] = promise;\n\n \t\t// start chunk loading\n \t\tvar head = document.getElementsByTagName('head')[0];\n \t\tvar script = document.createElement('script');\n \t\tscript.type = 'text/javascript';\n \t\tscript.charset = 'utf-8';\n \t\tscript.async = true;\n \t\tscript.timeout = 120000;\n\n \t\tif (__webpack_require__.nc) {\n \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t}\n \t\tscript.src = __webpack_require__.p + \"build/\" + ({\"0\":\"sprite\"}[chunkId]||chunkId) + \".js\";\n \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n \t\tscript.onerror = script.onload = onScriptComplete;\n \t\tfunction onScriptComplete() {\n \t\t\t// avoid mem leaks in IE.\n \t\t\tscript.onerror = script.onload = null;\n \t\t\tclearTimeout(timeout);\n \t\t\tvar chunk = installedChunks[chunkId];\n \t\t\tif(chunk !== 0) {\n \t\t\t\tif(chunk) {\n \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n \t\t\t\t}\n \t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t}\n \t\t};\n \t\thead.appendChild(script);\n\n \t\treturn promise;\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c47a32ab6f4f2139b9a5","import { Event,raf } from '_'\nimport gl2d from 'glsl'\n\n//舞台\nclass _Stage extends Event {\n    constructor(canvas) {\n        super();\n        this.dpr = window.devicePixelRatio || 1;\n  \n        this.container = canvas || null;\n        // context\n        this.gl = null;\n        // image matting\n        this.im = null;\n\n        // ticker\n        this.then = 0;\n\n\n        //el设置为空或者为父节点\n        if ( !this.container || this.container.nodeName !== 'CANVAS' ){\n            let canvas = document.createElement('canvas');\n            canvas.id = 'gl';\n            canvas.oncontextmenu = function (){\n                return false;\n            }\n\n            if (!this.container){\n                document.body.appendChild(canvas); \n            }\n            if (this.container.nodeName !== 'CANVAS'){\n                this.container.appendChild(canvas)\n            }\n            \n            //重置\n            this.container = document.querySelector('#gl');\n        }\n\n        this.init();\n    }\n    init () {\n        //event测试\n        this.on((content) => console.log(`get published content: ${content}`), 'Event test')\n        this.on((content) => console.log(`get content: ${content}`),'sss')\n        \n        //canvas外层容器宽高 利用css响应布局\n        this._width = this.container.parentNode.clientWidth;\n        this._height = this.container.parentNode.clientHeight;\n        //真实宽高\n        this.width = this.dpr * this._width;\n        this.height = this.dpr * this._height;\n        //初始化canvas元素\n        this.container.style.width = `${this._width}px`;\n        this.container.style.height = `${this._height}px`;\n        \n        this.container.width = ~~ this.width;\n        this.container.height = ~~ this.height;\n        \n        // Sprite Painter\n        this.im = gl2d(this.container);\n        // target\n        this.gl = this.im.gl;\n\n        this.initEvent();\n    }\n    dp (px) {\n        return ~~ px * this.dpr\n    }\n    //single bus\n    initEvent () {\n        const events = ['mousedown', 'mouseup', 'mousemove',\n        'touchstart', 'touchend', 'touchmove',\n        'click'];\n        events.forEach((event)=>{\n            \n            this.container.addEventListener(event,(e)=>{\n            \n                const {left, top} = e.target.getBoundingClientRect();\n                let originalX, originalY;\n                const evtArgs = {\n                    originalEvent: e,\n                    type:event\n                }\n                if(e.changedTouches) {\n                    const {clientX, clientY} = e.changedTouches[0]\n                    \n                    originalX = Math.round(clientX - left)\n                    originalY = Math.round(clientY - top)          \n                } else {\n                    originalX = Math.round(e.clientX - left)\n                    originalY = Math.round(e.clientY - top)\n                }\n                Object.assign(evtArgs, {originalX, originalY});\n                this.emit('native',event,evtArgs);\n            },true);\n        })\n    }\n    viewport (gl = this.gl){\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n    }\n    clear (gl = this.gl) {\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    update() {}\n    draw() {}\n    render (time){\n        console.log('render');\n        raf(()=>this.loop()); \n    }\n    loop (time){\n        let now = time * 0.001;\n        this.deltaTime = Math.min(0.1, now - this.then);\n        this.then = now;\n        console.log('loop');\n        this.update();\n        this.draw();\n        raf(()=>this.loop());\n    }\n}\n\nconst Stage = {\n    create: function(...args){\n        return new _Stage(...args);\n    }\n}\n\nexport default Stage\n\n\n// WEBPACK FOOTER //\n// ./src/stage/stage.js","const mat3 = {\n    identity: [1.0, 0.0, 0.0,\n        0.0, 1.0, 0.0,\n        0.0, 0.0, 1.0],\n\n    multiply: function (m1, m2) {\n        let m10 = m1[0], m11 = m1[1], m12 = m1[2], m13 = m1[3], m14 = m1[4], m15 = m1[5], m16 = m1[6], m17 = m1[7], m18 = m1[8],\n        m20 = m2[0], m21 = m2[1], m22 = m2[2], m23 = m2[3], m24 = m2[4], m25 = m2[5], m26 = m2[6], m27 = m2[7], m28 = m2[8];\n\n        m2[0] = m20 * m10 + m23 * m11 + m26 * m12;\n        m2[1] = m21 * m10 + m24 * m11 + m27 * m12;\n        m2[2] = m22 * m10 + m25 * m11 + m28 * m12;\n        m2[3] = m20 * m13 + m23 * m14 + m26 * m15;\n        m2[4] = m21 * m13 + m24 * m14 + m27 * m15;\n        m2[5] = m22 * m13 + m25 * m14 + m28 * m15;\n        m2[6] = m20 * m16 + m23 * m17 + m26 * m18;\n        m2[7] = m21 * m16 + m24 * m17 + m27 * m18;\n        m2[8] = m22 * m16 + m25 * m17 + m28 * m18;\n    },\n\n    vec2_multiply: function (m1, m2) {\n        let mOut = [];\n        mOut[0] = m2[0] * m1[0] + m2[3] * m1[1] + m2[6];\n        mOut[1] = m2[1] * m1[0] + m2[4] * m1[1] + m2[7];\n        return mOut;\n    },\n\n    transpose: function (m) {\n        return [m[0], m[3], m[6], m[1], m[4], m[7], m[2], m[5], m[8]];\n    }\n}\n\nconst vec3 = {\n    length: function(pt) {\n        return Math.sqrt(pt[0] * pt[0] + pt[1] * pt[1] + pt[2] * pt[2]);\n      },\n  \n      normalize: function(pt) {\n        var d = Math.sqrt((pt[0] * pt[0]) + (pt[1] * pt[1]) + (pt[2] * pt[2]));\n        if (d === 0) {\n          return [0, 0, 0];\n        }\n        return [pt[0] / d, pt[1] / d, pt[2] / d];\n      },\n  \n      dot: function(v1, v2) {\n        return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\n      },\n  \n      angle: function(v1, v2) {\n        return Math.acos((v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2]) / (Math.sqrt(v1[0] * v1[0] + v1[1] * v1[1] + v1[2] * v1[2]) * Math.sqrt(v2[0] * v2[0] + v2[1] * v2[1] + v2[2] * v2[2])));\n      },\n  \n      cross: function(vectA, vectB) {\n        return [vectA[1] * vectB[2] - vectB[1] * vectA[2], vectA[2] * vectB[0] - vectB[2] * vectA[0], vectA[0] * vectB[1] - vectB[0] * vectA[1]];\n      },\n  \n      multiply: function(vectA, constB) {\n        return [vectA[0] * constB, vectA[1] * constB, vectA[2] * constB];\n      },\n  \n      add: function(vectA, vectB) {\n        return [vectA[0] + vectB[0], vectA[1] + vectB[1], vectA[2] + vectB[2]];\n      },\n  \n      subtract: function(vectA, vectB) {\n        return [vectA[0] - vectB[0], vectA[1] - vectB[1], vectA[2] - vectB[2]];\n      },\n  \n      equal: function(a, b) {\n        var epsilon = 0.0000001;\n        if ((a === undefined) && (b === undefined)) {\n          return true;\n        }\n        if ((a === undefined) || (b === undefined)) {\n          return false;\n        }\n        return (Math.abs(a[0] - b[0]) < epsilon && Math.abs(a[1] - b[1]) < epsilon && Math.abs(a[2] - b[2]) < epsilon);\n      }\n}\n\nconst m4 = {\n  multiply: function(a, b, dst){\n    dst = dst || new Float32Array(16);\n    let b00 = b[0 * 4 + 0];\n    let b01 = b[0 * 4 + 1];\n    let b02 = b[0 * 4 + 2];\n    let b03 = b[0 * 4 + 3];\n    let b10 = b[1 * 4 + 0];\n    let b11 = b[1 * 4 + 1];\n    let b12 = b[1 * 4 + 2];\n    let b13 = b[1 * 4 + 3];\n    let b20 = b[2 * 4 + 0];\n    let b21 = b[2 * 4 + 1];\n    let b22 = b[2 * 4 + 2];\n    let b23 = b[2 * 4 + 3];\n    let b30 = b[3 * 4 + 0];\n    let b31 = b[3 * 4 + 1];\n    let b32 = b[3 * 4 + 2];\n    let b33 = b[3 * 4 + 3];\n    let a00 = a[0 * 4 + 0];\n    let a01 = a[0 * 4 + 1];\n    let a02 = a[0 * 4 + 2];\n    let a03 = a[0 * 4 + 3];\n    let a10 = a[1 * 4 + 0];\n    let a11 = a[1 * 4 + 1];\n    let a12 = a[1 * 4 + 2];\n    let a13 = a[1 * 4 + 3];\n    let a20 = a[2 * 4 + 0];\n    let a21 = a[2 * 4 + 1];\n    let a22 = a[2 * 4 + 2];\n    let a23 = a[2 * 4 + 3];\n    let a30 = a[3 * 4 + 0];\n    let a31 = a[3 * 4 + 1];\n    let a32 = a[3 * 4 + 2];\n    let a33 = a[3 * 4 + 3];\n    dst[ 0] = b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30;\n    dst[ 1] = b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31;\n    dst[ 2] = b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32;\n    dst[ 3] = b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33;\n    dst[ 4] = b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30;\n    dst[ 5] = b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31;\n    dst[ 6] = b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32;\n    dst[ 7] = b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33;\n    dst[ 8] = b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30;\n    dst[ 9] = b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31;\n    dst[10] = b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32;\n    dst[11] = b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33;\n    dst[12] = b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30;\n    dst[13] = b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31;\n    dst[14] = b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32;\n    dst[15] = b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33;\n    return dst;\n  },\n\n  addVectors: function(a, b, dst){\n    dst = dst || new Float32Array(3);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    dst[2] = a[2] + b[2];\n    return dst;\n  },\n\n  subtractVectors: function(a, b, dst){\n    dst = dst || new Float32Array(3);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    dst[2] = a[2] - b[2];\n    return dst;\n  },\n\n  normalize: function(v, dst){\n    dst = dst || new Float32Array(3);\n    let length = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n    if (length > 0.00001) {\n      dst[0] = v[0] / length;\n      dst[1] = v[1] / length;\n      dst[2] = v[2] / length;\n    }\n    return dst;\n  },\n\n  cross: function(a, b, dst){\n    dst = dst || new Float32Array(3);\n    dst[0] = a[1] * b[2] - a[2] * b[1];\n    dst[1] = a[2] * b[0] - a[0] * b[2];\n    dst[2] = a[0] * b[1] - a[1] * b[0];\n    return dst;\n  },\n\n  dot: function(a, b){\n    return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\n  },\n\n  distanceSq: function(a, b){\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    return dx * dx + dy * dy + dz * dz;\n  },\n\n  distance: function(a, b){\n    return Math.sqrt(distanceSq(a, b));\n  },\n\n  identity: function(dst){\n    dst = dst || new Float32Array(16);\n    \n    dst[ 0] = 1;\n    dst[ 1] = 0;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = 1;\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = 0;\n    dst[ 9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    \n    return dst;\n  },\n\n  transpose: function(m, dst){\n    dst = dst || new Float32Array(16);\n    \n    dst[ 0] = m[0];\n    dst[ 1] = m[4];\n    dst[ 2] = m[8];\n    dst[ 3] = m[12];\n    dst[ 4] = m[1];\n    dst[ 5] = m[5];\n    dst[ 6] = m[9];\n    dst[ 7] = m[13];\n    dst[ 8] = m[2];\n    dst[ 9] = m[6];\n    dst[10] = m[10];\n    dst[11] = m[14];\n    dst[12] = m[3];\n    dst[13] = m[7];\n    dst[14] = m[11];\n    dst[15] = m[15];\n    \n    return dst;\n  },\n\n  lookAt: function(cameraPosition, target, up, dst){\n    dst = dst || new Float32Array(16);\n    let zAxis = normalize(\n        subtractVectors(cameraPosition, target));\n    let xAxis = normalize(cross(up, zAxis));\n    let yAxis = normalize(cross(zAxis, xAxis));\n\n    dst[ 0] = xAxis[0];\n    dst[ 1] = xAxis[1];\n    dst[ 2] = xAxis[2];\n    dst[ 3] = 0;\n    dst[ 4] = yAxis[0];\n    dst[ 5] = yAxis[1];\n    dst[ 6] = yAxis[2];\n    dst[ 7] = 0;\n    dst[ 8] = zAxis[0];\n    dst[ 9] = zAxis[1];\n    dst[10] = zAxis[2];\n    dst[11] = 0;\n    dst[12] = cameraPosition[0];\n    dst[13] = cameraPosition[1];\n    dst[14] = cameraPosition[2];\n    dst[15] = 1;\n\n    return dst;\n  },\n\n  perspective: function(fieldOfViewInRadians, aspect, near, far, dst){\n    dst = dst || new Float32Array(16);\n    let f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewInRadians);\n    let rangeInv = 1.0 / (near - far);\n\n    dst[ 0] = f / aspect;\n    dst[ 1] = 0;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = f;\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = 0;\n    dst[ 9] = 0;\n    dst[10] = (near + far) * rangeInv;\n    dst[11] = -1;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = near * far * rangeInv * 2;\n    dst[15] = 0;\n\n    return dst;\n  },\n\n  orthographic: function(left, right, bottom, top, near, far, dst){\n    dst = dst || new Float32Array(16);\n    \n    dst[ 0] = 2 / (right - left);\n    dst[ 1] = 0;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = 2 / (top - bottom);\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = 0;\n    dst[ 9] = 0;\n    dst[10] = 2 / (near - far);\n    dst[11] = 0;\n    dst[12] = (left + right) / (left - right);\n    dst[13] = (bottom + top) / (bottom - top);\n    dst[14] = (near + far) / (near - far);\n    dst[15] = 1;\n    \n    return dst;\n  },\n\n  frustum: function(left, right, bottom, top, near, far){\n    let dx = right - left;\n    let dy = top - bottom;\n    let dz = far - near;\n\n    dst[ 0] = 2 * near / dx;\n    dst[ 1] = 0;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = 2 * near / dy;\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = (left + right) / dx;\n    dst[ 9] = (top + bottom) / dy;\n    dst[10] = -(far + near) / dz;\n    dst[11] = -1;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = -2 * near * far / dz;\n    dst[15] = 0;\n\n    return dst;\n  },\n\n  translation: function(tx, ty, tz, dst){\n    dst = dst || new Float32Array(16);\n    \n    dst[ 0] = 1;\n    dst[ 1] = 0;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = 1;\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = 0;\n    dst[ 9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = tx;\n    dst[13] = ty;\n    dst[14] = tz;\n    dst[15] = 1;\n    \n    return dst;\n  },\n\n  translate: function(m, tx, ty, tz, dst){\n    dst = dst || new Float32Array(16);\n    \n    let m00 = m[0];\n    let m01 = m[1];\n    let m02 = m[2];\n    let m03 = m[3];\n    let m10 = m[1 * 4 + 0];\n    let m11 = m[1 * 4 + 1];\n    let m12 = m[1 * 4 + 2];\n    let m13 = m[1 * 4 + 3];\n    let m20 = m[2 * 4 + 0];\n    let m21 = m[2 * 4 + 1];\n    let m22 = m[2 * 4 + 2];\n    let m23 = m[2 * 4 + 3];\n    let m30 = m[3 * 4 + 0];\n    let m31 = m[3 * 4 + 1];\n    let m32 = m[3 * 4 + 2];\n    let m33 = m[3 * 4 + 3];\n    \n    if (m !== dst) {\n      dst[ 0] = m00;\n      dst[ 1] = m01;\n      dst[ 2] = m02;\n      dst[ 3] = m03;\n      dst[ 4] = m10;\n      dst[ 5] = m11;\n      dst[ 6] = m12;\n      dst[ 7] = m13;\n      dst[ 8] = m20;\n      dst[ 9] = m21;\n      dst[10] = m22;\n      dst[11] = m23;\n    }\n    \n    dst[12] = m00 * tx + m10 * ty + m20 * tz + m30;\n    dst[13] = m01 * tx + m11 * ty + m21 * tz + m31;\n    dst[14] = m02 * tx + m12 * ty + m22 * tz + m32;\n    dst[15] = m03 * tx + m13 * ty + m23 * tz + m33;\n    \n    return dst;\n  },\n\n  xRotation: function(angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n\n    dst[ 0] = 1;\n    dst[ 1] = 0;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = c;\n    dst[ 6] = s;\n    dst[ 7] = 0;\n    dst[ 8] = 0;\n    dst[ 9] = -s;\n    dst[10] = c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n\n    return dst;\n  },\n\n  xRotate: function(m, angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    \n    let m10 = m[4];\n    let m11 = m[5];\n    let m12 = m[6];\n    let m13 = m[7];\n    let m20 = m[8];\n    let m21 = m[9];\n    let m22 = m[10];\n    let m23 = m[11];\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n    \n    dst[4]  = c * m10 + s * m20;\n    dst[5]  = c * m11 + s * m21;\n    dst[6]  = c * m12 + s * m22;\n    dst[7]  = c * m13 + s * m23;\n    dst[8]  = c * m20 - s * m10;\n    dst[9]  = c * m21 - s * m11;\n    dst[10] = c * m22 - s * m12;\n    dst[11] = c * m23 - s * m13;\n    \n    if (m !== dst) {\n        dst[ 0] = m[ 0];\n        dst[ 1] = m[ 1];\n        dst[ 2] = m[ 2];\n        dst[ 3] = m[ 3];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    \n    return dst;\n  },\n\n  yRotation: function(angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n\n    dst[ 0] = c;\n    dst[ 1] = 0;\n    dst[ 2] = -s;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = 1;\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = s;\n    dst[ 9] = 0;\n    dst[10] = c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n\n    return dst;\n  },\n\n  yRotate: function(m, angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    \n    let m00 = m[0 * 4 + 0];\n    let m01 = m[0 * 4 + 1];\n    let m02 = m[0 * 4 + 2];\n    let m03 = m[0 * 4 + 3];\n    let m20 = m[2 * 4 + 0];\n    let m21 = m[2 * 4 + 1];\n    let m22 = m[2 * 4 + 2];\n    let m23 = m[2 * 4 + 3];\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n    \n    dst[ 0] = c * m00 - s * m20;\n    dst[ 1] = c * m01 - s * m21;\n    dst[ 2] = c * m02 - s * m22;\n    dst[ 3] = c * m03 - s * m23;\n    dst[ 8] = c * m20 + s * m00;\n    dst[ 9] = c * m21 + s * m01;\n    dst[10] = c * m22 + s * m02;\n    dst[11] = c * m23 + s * m03;\n    \n    if (m !== dst) {\n        dst[ 4] = m[ 4];\n        dst[ 5] = m[ 5];\n        dst[ 6] = m[ 6];\n        dst[ 7] = m[ 7];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    \n    return dst;\n  },\n\n  zRotation: function(angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n\n    dst[ 0] = c;\n    dst[ 1] = s;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = -s;\n    dst[ 5] = c;\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = 0;\n    dst[ 9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n\n    return dst;\n  },\n\n  zRotate: function(m, angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    \n    let m00 = m[0 * 4 + 0];\n    let m01 = m[0 * 4 + 1];\n    let m02 = m[0 * 4 + 2];\n    let m03 = m[0 * 4 + 3];\n    let m10 = m[1 * 4 + 0];\n    let m11 = m[1 * 4 + 1];\n    let m12 = m[1 * 4 + 2];\n    let m13 = m[1 * 4 + 3];\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n    \n    dst[ 0] = c * m00 + s * m10;\n    dst[ 1] = c * m01 + s * m11;\n    dst[ 2] = c * m02 + s * m12;\n    dst[ 3] = c * m03 + s * m13;\n    dst[ 4] = c * m10 - s * m00;\n    dst[ 5] = c * m11 - s * m01;\n    dst[ 6] = c * m12 - s * m02;\n    dst[ 7] = c * m13 - s * m03;\n    \n    if (m !== dst) {\n        dst[ 8] = m[ 8];\n        dst[ 9] = m[ 9];\n        dst[10] = m[10];\n        dst[11] = m[11];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    \n    return dst;\n  },\n\n  axisRotation: function(axis, angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    \n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    let n = Math.sqrt(x * x + y * y + z * z);\n        x /= n;\n        y /= n;\n        z /= n;\n    let xx = x * x;\n    let yy = y * y;\n    let zz = z * z;\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n    let oneMinusCosine = 1 - c;\n    \n    dst[ 0] = xx + (1 - xx) * c;\n    dst[ 1] = x * y * oneMinusCosine + z * s;\n    dst[ 2] = x * z * oneMinusCosine - y * s;\n    dst[ 3] = 0;\n    dst[ 4] = x * y * oneMinusCosine - z * s;\n    dst[ 5] = yy + (1 - yy) * c;\n    dst[ 6] = y * z * oneMinusCosine + x * s;\n    dst[ 7] = 0;\n    dst[ 8] = x * z * oneMinusCosine + y * s;\n    dst[ 9] = y * z * oneMinusCosine - x * s;\n    dst[10] = zz + (1 - zz) * c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    \n    return dst;\n  },\n\n  axisRotate: function(m, axis, angleInRadians, dst){\n    dst = dst || new Float32Array(16);\n    \n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    let n = Math.sqrt(x * x + y * y + z * z);\n        x /= n;\n        y /= n;\n        z /= n;\n    let xx = x * x;\n    let yy = y * y;\n    let zz = z * z;\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n    let oneMinusCosine = 1 - c;\n    \n    let r00 = xx + (1 - xx) * c;\n    let r01 = x * y * oneMinusCosine + z * s;\n    let r02 = x * z * oneMinusCosine - y * s;\n    let r10 = x * y * oneMinusCosine - z * s;\n    let r11 = yy + (1 - yy) * c;\n    let r12 = y * z * oneMinusCosine + x * s;\n    let r20 = x * z * oneMinusCosine + y * s;\n    let r21 = y * z * oneMinusCosine - x * s;\n    let r22 = zz + (1 - zz) * c;\n    \n    let m00 = m[0];\n    let m01 = m[1];\n    let m02 = m[2];\n    let m03 = m[3];\n    let m10 = m[4];\n    let m11 = m[5];\n    let m12 = m[6];\n    let m13 = m[7];\n    let m20 = m[8];\n    let m21 = m[9];\n    let m22 = m[10];\n    let m23 = m[11];\n    \n    dst[ 0] = r00 * m00 + r01 * m10 + r02 * m20;\n    dst[ 1] = r00 * m01 + r01 * m11 + r02 * m21;\n    dst[ 2] = r00 * m02 + r01 * m12 + r02 * m22;\n    dst[ 3] = r00 * m03 + r01 * m13 + r02 * m23;\n    dst[ 4] = r10 * m00 + r11 * m10 + r12 * m20;\n    dst[ 5] = r10 * m01 + r11 * m11 + r12 * m21;\n    dst[ 6] = r10 * m02 + r11 * m12 + r12 * m22;\n    dst[ 7] = r10 * m03 + r11 * m13 + r12 * m23;\n    dst[ 8] = r20 * m00 + r21 * m10 + r22 * m20;\n    dst[ 9] = r20 * m01 + r21 * m11 + r22 * m21;\n    dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\n    dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\n    \n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    \n    return dst;\n  },\n\n  scaling: function(sx, sy, sz, dst){\n    dst = dst || new Float32Array(16);\n    \n    dst[ 0] = sx;\n    dst[ 1] = 0;\n    dst[ 2] = 0;\n    dst[ 3] = 0;\n    dst[ 4] = 0;\n    dst[ 5] = sy;\n    dst[ 6] = 0;\n    dst[ 7] = 0;\n    dst[ 8] = 0;\n    dst[ 9] = 0;\n    dst[10] = sz;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    \n    return dst;\n  },\n\n  scale: function(m, sx, sy, sz, dst){\n    dst = dst || new Float32Array(16);\n    \n    dst[ 0] = sx * m[0 * 4 + 0];\n    dst[ 1] = sx * m[0 * 4 + 1];\n    dst[ 2] = sx * m[0 * 4 + 2];\n    dst[ 3] = sx * m[0 * 4 + 3];\n    dst[ 4] = sy * m[1 * 4 + 0];\n    dst[ 5] = sy * m[1 * 4 + 1];\n    dst[ 6] = sy * m[1 * 4 + 2];\n    dst[ 7] = sy * m[1 * 4 + 3];\n    dst[ 8] = sz * m[2 * 4 + 0];\n    dst[ 9] = sz * m[2 * 4 + 1];\n    dst[10] = sz * m[2 * 4 + 2];\n    dst[11] = sz * m[2 * 4 + 3];\n    \n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    \n    return dst;\n  },\n\n  inverse: function(m, dst){\n    dst = dst || new Float32Array(16);\n    let m00 = m[0 * 4 + 0];\n    let m01 = m[0 * 4 + 1];\n    let m02 = m[0 * 4 + 2];\n    let m03 = m[0 * 4 + 3];\n    let m10 = m[1 * 4 + 0];\n    let m11 = m[1 * 4 + 1];\n    let m12 = m[1 * 4 + 2];\n    let m13 = m[1 * 4 + 3];\n    let m20 = m[2 * 4 + 0];\n    let m21 = m[2 * 4 + 1];\n    let m22 = m[2 * 4 + 2];\n    let m23 = m[2 * 4 + 3];\n    let m30 = m[3 * 4 + 0];\n    let m31 = m[3 * 4 + 1];\n    let m32 = m[3 * 4 + 2];\n    let m33 = m[3 * 4 + 3];\n    let tmp_0  = m22 * m33;\n    let tmp_1  = m32 * m23;\n    let tmp_2  = m12 * m33;\n    let tmp_3  = m32 * m13;\n    let tmp_4  = m12 * m23;\n    let tmp_5  = m22 * m13;\n    let tmp_6  = m02 * m33;\n    let tmp_7  = m32 * m03;\n    let tmp_8  = m02 * m23;\n    let tmp_9  = m22 * m03;\n    let tmp_10 = m02 * m13;\n    let tmp_11 = m12 * m03;\n    let tmp_12 = m20 * m31;\n    let tmp_13 = m30 * m21;\n    let tmp_14 = m10 * m31;\n    let tmp_15 = m30 * m11;\n    let tmp_16 = m10 * m21;\n    let tmp_17 = m20 * m11;\n    let tmp_18 = m00 * m31;\n    let tmp_19 = m30 * m01;\n    let tmp_20 = m00 * m21;\n    let tmp_21 = m20 * m01;\n    let tmp_22 = m00 * m11;\n    let tmp_23 = m10 * m01;\n\n    let t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\n        (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n    let t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\n        (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n    let t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\n        (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n    let t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\n        (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n\n    let d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n\n    dst[0] = d * t0;\n    dst[1] = d * t1;\n    dst[2] = d * t2;\n    dst[3] = d * t3;\n    dst[4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\n          (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\n    dst[5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\n          (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\n    dst[6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\n          (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\n    dst[7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\n          (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\n    dst[8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\n          (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\n    dst[9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\n          (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\n    dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\n          (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\n    dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\n          (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\n    dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\n          (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\n    dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\n          (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\n    dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\n          (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\n    dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\n          (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\n\n    return dst;\n  },\n\n  transformVector: function(m, v, dst){\n    dst = dst || new Float32Array(4);\n    for (var i = 0; i < 4; ++i) {\n      dst[i] = 0.0;\n      for (var j = 0; j < 4; ++j) {\n        dst[i] += v[j] * m[j * 4 + i];\n      }\n    }\n    return dst;\n  },\n\n  transformPoint: function(m, v, dst){\n    dst = dst || new Float32Array(3);\n    let v0 = v[0];\n    let v1 = v[1];\n    let v2 = v[2];\n    let d = v0 * m[0 * 4 + 3] + v1 * m[1 * 4 + 3] + v2 * m[2 * 4 + 3] + m[3 * 4 + 3];\n\n    dst[0] = (v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0] + m[3 * 4 + 0]) / d;\n    dst[1] = (v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1] + m[3 * 4 + 1]) / d;\n    dst[2] = (v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2] + m[3 * 4 + 2]) / d;\n\n    return dst;\n  },\n\n  transformDirection: function(m, v, dst){\n    dst = dst || new Float32Array(3);\n    \n    let v0 = v[0];\n    let v1 = v[1];\n    let v2 = v[2];\n    \n    dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];\n    dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];\n    dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];\n    \n    return dst;\n  },\n\n  transformNormal: function(m, v, dst){\n    dst = dst || new Float32Array(3);\n    let mi = inverse(m);\n    let v0 = v[0];\n    let v1 = v[1];\n    let v2 = v[2];\n\n    dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];\n    dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];\n    dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];\n\n    return dst;\n  },\n\n  copy: function(src, dst){\n    dst = dst || new Float32Array(16);\n    \n    dst[ 0] = src[ 0];\n    dst[ 1] = src[ 1];\n    dst[ 2] = src[ 2];\n    dst[ 3] = src[ 3];\n    dst[ 4] = src[ 4];\n    dst[ 5] = src[ 5];\n    dst[ 6] = src[ 6];\n    dst[ 7] = src[ 7];\n    dst[ 8] = src[ 8];\n    dst[ 9] = src[ 9];\n    dst[10] = src[10];\n    dst[11] = src[11];\n    dst[12] = src[12];\n    dst[13] = src[13];\n    dst[14] = src[14];\n    dst[15] = src[15];\n    \n    return dst;\n  }\n}\n\nexport {mat3,vec3,m4}\n\n\n// WEBPACK FOOTER //\n// ./src/stage/math.js","/*\n*   create by vincent 31 Dec 2016\n*/\n\nconst raf = window.requestAnimationFrame\n|| window.webkitRequestAnimationFrame\n|| window.mozRequestAnimationFrame\n|| window.oRequestAnimationFrame\n|| window.msRequestAnimationFrame\n|| function(callback) {\n  window.setTimeout(callback, 1000 / 60);\n};\n\nconst log = function (){\n    console.log.apply(console, arguments);\n}\n\nconst queue = function(funcs, scope){\n    (function next() {  \n        if(funcs.length > 0) {  \n            funcs.shift().apply(scope || {}, [next].concat(Array.prototype.slice.call(arguments, 0)));  \n        }  \n  })();\n}\n\nconst adler32 = function(str){\n    var MOD = 65521;\n    var a = 1;\n    var b = 0;\n    for (var i = 0; i < data.length >>> 0 ; i++) {\n        a = (a + data.charCodeAt(i)) % MOD;\n        b = (b + a) % MOD;\n    }\n    return a | (b << 16);\n}\n\nconst observer = function(observer, key, fn) {\n    if (observer[key]) {\n      observer.__[key] = {}\n    }\n  \n    Object.defineProperty(observer, key, {\n      get: () => {\n        return observer.__[key]\n      },\n      set: value => {\n        fn(value, observer.__[key])\n        observer.__[key] = value\n      }\n    })\n}\n\n\nclass Event {\n    constructor() {\n      this.subscribers = new Map([[]]);\n    }\n  \n    on( type, fn) {\n      let subs = this.subscribers;\n      if (!subs.get(type)) return subs.set(type, [fn]);\n      subs.set(type, (subs.get(type).push(fn)));\n    }\n  \n    emit( type,content) {\n      let handlers = this.subscribers.get(type);\n      if(!handlers) return\n      for (let fn of handlers) {\n        fn.apply(this, [].slice.call(arguments, 1));\n      }\n    }\n}\n\nclass EventEmitter {\n  constructor (){\n    this.list = {};\n  }\n  on ( fn, type = 'any') {\n    if(!this.list[type]){\n      this.list[type] = [];\n    }\n    this.list[type].push(fn);\n  }\n  emit ( content, type = 'any'){\n    let cb = this.list[type];\n    if (!cb || cb.length === 0) {\n      return;\n    }\n    for (let i = 0; i < cb.length; i++) {\n      cb[i].apply(this, arguments);\n    }\n    delete this.list[type]\n  }\n}\n\n\nexport { queue,Event,raf }\n\n\n// WEBPACK FOOTER //\n// ./src/_.js","import Transform from 'transform'\nimport {m4} from 'math'\n\nclass Gl {\n    constructor(canvas){\n        this.canvas = canvas;\n        this.gl = undefined;\n        this.transform = new Transform();\n        this._resources = new Map();\n        this.init();\n    }\n    init (){\n        this.gl = this.canvas.getContext(\"webgl\") || this.canvas.getContext(\"experimental-webgl\");\n        let gl = this.gl;\n        if (!gl) throw new Error('connot get gl context!');\n\n  \n        let program = this.createProgram(gl);\n        this.positionLocation = gl.getAttribLocation(program, \"a_position\");\n        this.texcoordLocation = gl.getAttribLocation(program, \"a_texcoord\");\n      \n        this.matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\n        this.textureMatrixLocation = gl.getUniformLocation(program, \"u_textureMatrix\");\n        let textureLocation = gl.getUniformLocation(program, \"u_texture\");\n\n        // Create a buffer.\n        let positionBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n        this.positionBuffer = positionBuffer;\n         // Put a unit quad in the buffer\n        let positions = [\n            0, 0,\n            0, 1,\n            1, 0,\n            1, 0,\n            0, 1,\n            1, 1,\n        ];\n\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n\n        // Create a buffer for texture coords\n        let texcoordBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);\n        this.texcoordBuffer = texcoordBuffer;\n\n        // Put texcoords in the buffer\n        let texcoords = [\n            0, 0,\n            0, 1,\n            1, 0,\n            1, 0,\n            0, 1,\n            1, 1,\n        ];\n\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texcoords), gl.STATIC_DRAW);\n\n\n        //gl.tex = this.loadTexture.bind(this,arguments);\n        //gl.draw = this.drawImage.bind(this,arguments);\n\n        // gl.draw = function (){\n        //     drawImage\n        // }\n\n    }\n    getFragmentShaderSource(){\n        let source = \n        `precision mediump float;\n        \n        varying vec2 v_texcoord;\n        \n        uniform sampler2D u_texture;\n        \n        void main() {\n           gl_FragColor = texture2D(u_texture, v_texcoord);\n        }`;\n        return source\n    }\n    getVertexShaderSource(){\n        let source = \n        `attribute vec4 a_position;\n        attribute vec2 a_texcoord;\n        \n        uniform mat4 u_matrix;\n        uniform mat4 u_textureMatrix;\n        \n        varying vec2 v_texcoord;\n        \n        void main() {\n           gl_Position = u_matrix * a_position;\n           v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\n        }`;\n        return source\n    }\n    getFragmentShader(gl){\n        return this.getShader(gl, gl.FRAGMENT_SHADER, this.getFragmentShaderSource());\n    }\n    getVertexShader(gl){\n        return this.getShader(gl, gl.VERTEX_SHADER, this.getVertexShaderSource());\n    }\n    getShader(gl, type, source){\n        let shader = gl.createShader(type);\n        \n            gl.shaderSource(shader, source);\n            gl.compileShader(shader);\n        \n            if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                console.log(gl.getShaderInfoLog(shader));\n                return null;\n            }\n        \n            return shader;\n    }\n    createProgram (gl){\n        let fragmentShader = this.getFragmentShader(gl);\n        let vertexShader = this.getVertexShader(gl); \n        let shaderProgram = gl.createProgram();\n        \n        gl.attachShader(shaderProgram, vertexShader);\n        gl.attachShader(shaderProgram, fragmentShader);\n        gl.linkProgram(shaderProgram);\n    \n        let lineStatus = gl.getProgramParameter(shaderProgram, gl.LINK_STATUS);\n        if(!lineStatus) {\n            console.log(\"Could not initialise shaders:\" + gl.getProgramInfoLog(shaderProgram));\n        }\n    \n        gl.useProgram(shaderProgram);\n        return shaderProgram\n    }\n    loadTexture(url,timeout = 30000){\n\n        if (typeof url !== 'string') throw new Error('loadTexture faild');\n        let loadedTex = this._resources;\n        const mapKey = url;\n\n        if ( !loadedTex.has(mapKey) ){\n            return new Promise((resolve,reject)=>{\n                let gl = this.gl;\n                let tex = gl.createTexture();\n                \n                gl.bindTexture(gl.TEXTURE_2D, tex);\n                // Fill the texture with a 1x1 blue pixel.\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,new Uint8Array([0, 0, 255, 255]));\n                // let's assume all images are not a power of 2\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        \n                let textureInfo = {\n                    width: 1,\n                    height: 1,\n                    texture: tex,\n                };\n                const timer = setTimeout(() => {\n                    reject(new Error('loadTexture timeout'))\n                }, timeout);\n                let img = new Image();\n                img.addEventListener('load', function() {\n                  textureInfo.width = img.width;\n                  textureInfo.height = img.height;\n            \n                  gl.bindTexture(gl.TEXTURE_2D, textureInfo.texture);\n                  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n\n                  resolve(textureInfo);\n                  loadedTex.set(mapKey,textureInfo);\n                  clearTimeout(timer);\n                });\n                img.src = url;\n                //return textureInfo;\n            });\n            return Promise.resolve(loadedTex.get(mapKey));\n        }\n\n       \n    }\n    async loadTex(resources){\n        if (typeof resources === 'string' ){\n            return await this.loadTexture(resources);\n        } \n        if (Array.isArray(resources)){\n            const ret = [];\n            for(let i = 0; i < resources.length; i++) {\n                const res = resources[i];\n                if(typeof res === 'string') {\n                    ret.push(await this.loadTexture(res))\n                } else {\n                    throw new Error(`loadTexs faild in progress:${i}`);\n                }    \n            }\n            console.log(ret)\n            return ret \n        } \n    }\n    drawImage (\n        tex, texWidth, texHeight,\n        srcX, srcY, srcWidth, srcHeight,\n        dstX, dstY, dstWidth, dstHeight,\n        srcRotation\n    ){\n        let gl = this.gl;\n        if (dstX === undefined) {\n            dstX = srcX;\n            srcX = 0;\n        }\n        if (dstY === undefined) {\n            dstY = srcY;\n            srcY = 0;\n        }\n        if (srcWidth === undefined) {\n            srcWidth = texWidth;\n        }\n        if (srcHeight === undefined) {\n            srcHeight = texHeight;\n        }\n        if (dstWidth === undefined) {\n            dstWidth = srcWidth;\n            srcWidth = texWidth;\n        }\n        if (dstHeight === undefined) {\n            dstHeight = srcHeight;\n            srcHeight = texHeight;\n        }\n        if (srcRotation === undefined) {\n            srcRotation = 0;\n        }\n\n        gl.bindTexture(gl.TEXTURE_2D, tex);\n        //gl.useProgram(program);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.texcoordBuffer);\n        gl.enableVertexAttribArray(this.texcoordLocation);\n        gl.vertexAttribPointer(this.texcoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n        let matrix = m4.orthographic(0, gl.canvas.width, gl.canvas.height, 0, -1, 1);\n        matrix = m4.translate(matrix, dstX, dstY, 0);\n        matrix = m4.scale(matrix, dstWidth, dstHeight, 1);\n\n        gl.uniformMatrix4fv(this.matrixLocation, false, matrix);\n\n        let texMatrix = m4.scaling(1 / texWidth, 1 / texHeight, 1);\n\n            texMatrix = m4.translate(texMatrix, texWidth * 0.5, texHeight * 0.5, 0);\n            texMatrix = m4.zRotate(texMatrix, srcRotation);\n            texMatrix = m4.translate(texMatrix, texWidth * -0.5, texHeight * -0.5, 0);\n\n            texMatrix = m4.translate(texMatrix, srcX, srcY, 0);\n            texMatrix = m4.scale(texMatrix, srcWidth, srcHeight, 1);\n\n        gl.uniformMatrix4fv(this.textureMatrixLocation, false, texMatrix);\n\n        gl.uniform1i(this.textureLocation, 0);\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    }\n}\n\nconst gl2d = function (...args){\n    return new Gl(...args);\n}\n\nexport default gl2d\n\n\n// WEBPACK FOOTER //\n// ./src/stage/glsl.js","import {m4} from 'math'\n\nclass Transform {\n    constructor(){\n        this.stack = [];\n         // 因为栈是空的，需要放入一个初始化矩阵\n         this.restore();\n    }\n    // 抛出顶部的矩阵，重置为前一个矩阵\n    restore (){\n        this.stack.pop();\n        // 永远不要让栈为空\n        if (this.stack.length < 1) {\n          this.stack[0] = m4.identity();\n        }\n    }\n    // 讲当前矩阵备份到栈中\n    save (){\n        this.stack.push(this.getCurrentMatrix());\n    }\n    // 获取当前矩阵（栈顶的矩阵）\n    getCurrentMatrix (){\n        return this.stack[this.stack.length - 1].slice();\n    }\n    // 设置当前矩阵\n    setCurrentMatrix (){\n        return this.stack[this.stack.length - 1] = m;\n    }\n    // 平移当前矩阵\n    translate (x,y,z=0){\n        let m = this.getCurrentMatrix();\n        this.setCurrentMatrix(m4.translate(m, x, y, z));\n    }\n    // 旋转当前矩阵\n    rotateZ (angleInRadians){\n        let m = this.getCurrentMatrix();\n        this.setCurrentMatrix(m4.zRotate(m, angleInRadians));\n    }\n    scale (x,y,z=1){\n        let m = this.getCurrentMatrix();\n        this.setCurrentMatrix(m4.scale(m, x, y, z));\n    }\n}\n\nexport default Transform\n\n\n// WEBPACK FOOTER //\n// ./src/stage/transform.js"],"sourceRoot":""}